name: "Start and Stop Node.js App"
description: "Start and Stop Node.js App using PM2"
inputs:
  action:
    description: "start or stop"
    required: true
    default: "start"

runs:
  using: "composite"

  steps:
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 18

    - name: Install dependencies
      run: npm install
      shell: bash

    - name: Start Node.js App
      if: ${{ inputs.action == 'start' }}
      shell: bash
      run: |
        npm run start-pm2
        sleep 20

    - name: Stop Node.js App
      if: ${{ inputs.action == 'stop' }}
      shell: bash
      run: npm run stop-pm2
